---
title: 'Screenshot Provider'
description: 'Giving your agent eyes to see the screen'
icon: 'camera'
---

# Screenshot Provider

The Screenshot Provider is the component responsible for capturing the visual state of the environment. It acts as the "eyes" of the agent, providing the raw visual data that the model analyzes to make decisions.

## Available Implementations

OpenAGI provides two standard implementations out of the box:

### 1. AsyncScreenshotMaker (Recommended)
The `AsyncScreenshotMaker` is the standard choice for most agent applications. It wraps the screenshot capture in a thread pool to ensure that taking a screenshot (which is an I/O bound operation) does not block your agent's async event loop.

```python
from oagi import AsyncScreenshotMaker

# Non-blocking capture
image_provider = AsyncScreenshotMaker()
image = await image_provider()
```

### 2. ScreenshotMaker (Synchronous)
The `ScreenshotMaker` is the synchronous version, suitable for simple scripts or blocking contexts where async execution isn't required.

```python
from oagi import ScreenshotMaker

# Blocking capture
image_provider = ScreenshotMaker()
image = image_provider()
```

## Usage Example

Here is how to use a screenshot provider with an agent:

```python
import asyncio
from oagi import AsyncScreenshotMaker, TaskerAgent

async def main():
    # Initialize the provider with default settings
    provider = AsyncScreenshotMaker()
    
    # Use it in your agent
    agent = TaskerAgent()
    await agent.execute(
        instruction="Analyze the spreadsheet",
        action_handler=..., 
        image_provider=provider
    )

asyncio.run(main())
```

## Protocol Requirements

When creating a custom screenshot provider, you must implement the appropriate protocol depending on whether you're using sync or async execution.

### AsyncImageProvider Protocol

For asynchronous agents (recommended), implement the `AsyncImageProvider` protocol:

```python
from oagi.types import AsyncImageProvider, Image

class MyCustomProvider:
    async def __call__(self) -> Image:
        """
        Capture or retrieve a new screenshot.
        
        Returns:
            Image: An object that implements the Image protocol (must have a read() method)
        """
        # Your implementation here
        pass
    
    async def last_image(self) -> Image:
        """
        Return the most recently captured image without taking a new screenshot.
        If no image has been captured yet, this should capture a new one.
        
        Returns:
            Image: The last captured image
        """
        # Your implementation here
        pass
```

### ImageProvider Protocol

For synchronous execution, implement the `ImageProvider` protocol:

```python
from oagi.types import ImageProvider, Image

class MyCustomProvider:
    def __call__(self) -> Image:
        """
        Capture or retrieve a new screenshot.
        
        Returns:
            Image: An object that implements the Image protocol (must have a read() method)
        """
        # Your implementation here
        pass
    
    def last_image(self) -> Image:
        """
        Return the most recently captured image without taking a new screenshot.
        
        Returns:
            Image: The last captured image
        """
        # Your implementation here
        pass
```

### Image Protocol

The returned `Image` object must implement a single method:

```python
class MyImageWrapper:
    def read(self) -> bytes:
        """
        Read the image data as bytes.
        
        Returns:
            bytes: The raw image data (typically JPEG or PNG format)
        """
        # Your implementation here
        pass
```

## Remote & Custom Implementations

In many production scenarios, the agent runs on a server (Backend) but needs to capture screenshots from a remote computer (Client).

Instead, you need a custom Screenshot Provider that requests image data from the client.

### Example: SocketIOImageProvider

Here is how you might implement a provider that requests screenshots via Socket.IO:

```python
class SocketIOImageProvider:
    def __init__(self, socket_namespace, session_id):
        self.socket = socket_namespace
        self.session_id = session_id
        self._last_screenshot = None

    async def __call__(self):
        # Request screenshot from the client
        # We use .call() to wait for the response
        result = await self.socket.call('get_screenshot', room=self.session_id)
        self._last_screenshot = result['image_data']
        return self._last_screenshot
    
    async def last_image(self):
        if self._last_screenshot is None:
            return await self()
        return self._last_screenshot
```

## Best Practices

<Check>
**Use Async**: Always use `AsyncScreenshotMaker` when running agents to keep your application responsive.
</Check>

<Tip>
**Adjust Quality**: If the agent struggles to read small text or identify fine details, try increasing the font size on screen.
</Tip>

<Warning>
**Multi-Monitor Setups**: The default provider typically captures the primary display. Ensure your target application is on the primary screen or configure the underlying capture tool to select the correct region.
</Warning>
